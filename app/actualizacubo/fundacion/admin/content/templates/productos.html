<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;}
</style>

<div class="contentForm" style="width:inherit;">

<div class="left pagelist" style="height: auto; width: 1660px;">
         
            <div class="btnAdd">
            	<a href="javascript:;" rel="agregar|seccion">
                	<img src="images/iconAddUser.png" border="0" align="absmiddle" class="left">
                    <span style="float:left; margin:7px 0 0 0;">Agregar Nuevo</span>
                </a>
            </div>
</div>




<div class="left itemlist" style="width: 1625px;">
            <table border="0" cellpadding="0" cellspacing="0" align="center" width="100%">
                <tbody>
				<tr>
					<th align="left">Id</th>
					<th align="left">IdCategoria</th>
                    <th align="left" width="250">Titulo</th>                    
                    <th align="left" width="250">Descripcion</th>                    
                    <th align="left" width="250">Descripcion Larga</th>                    
                    <th align="left" width="250">Imagen</th>                    
                      <th align="left">Visible</th>
                     <th align="left" width="150">&nbsp;</th>
				</tr>
                			</tbody>
				{# foreach from=$obj->productos item=producto key=id #}	
					<tr>
						<td>{#$producto->id#}</td>
						<td>{#$producto->idCategoria#}</td>
						<td>{#$producto->titulo#}</td>
						<td>{#$producto->descripcion#}</td>
						<td>{#$producto->texto#}</td>
						<td>{#$producto->img#}</td>
 						<td>{#$producto->visible#}</td>
						<td align="center" class="btonActionItem" width="170">
							<a href="javascript:;" rel="editar|{#$producto->id#}">
							<img src="images/iconEditUser.png" border="0" align="middle" class="left">
							<span style="float:left; margin:7px 0 0 5px;">Editar</span>
							</a>
							<a href="javascript:;" rel="eliminar|{#$producto->id#}">
							<img src="images/iconDeleteUser.png" border="0" align="absmiddle" class="left">
							<span style="float:left; margin:7px 0 0 5px;">Eliminar</span>
							</a>                        
                        </td>
					</tr>
				{#/foreach#}
 			</table>
		</div>
</div> 
 
<script>
jQuery("[rel^='editar']").click(function(){

	var item=jQuery(this).attr("rel").split("|");
	var OBJ=jQuery(this)
	var HTML='<div id="editar" width="600" >';
        HTML+='<table  class="tg" align="center" width="100%">';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Categorias</td>';                    
        HTML+=' <td align="left" width="135"><select name="idCategoria"><option value="0">Ninguno</option>{# foreach from=$obj->categorias item=categoria key=id #}<option value="{#$categoria->id#}">{#$categoria->categoria#}</option>{#/foreach#}</select></td>';
		HTML+='</tr>';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250"class="tg-031e">Titulo</td>';                    
        HTML+=' <td align="left" width="135"><input type="text" name="titulo" value="'+jQuery(this).parent().parent().find("td:eq(2)").text()+'" /></td>';
		HTML+='</tr>';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Descripcion:</td>';                    
        HTML+=' <td align="left" width="135"><textarea rows="10" cols="50" name="descripcion">'+jQuery(this).parent().parent().find("td:eq(3)").text()+'</textarea></td>';
		HTML+='</tr>'; 		
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Descripcion Larga:</td>';                    
        HTML+=' <td align="left" width="135"><textarea rows="10" cols="50" name="texto">'+jQuery(this).parent().parent().find("td:eq(4)").text()+'</textarea></td>';
		HTML+='</tr>'; 		
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Imagen:</td>';                    
        HTML+=' <td align="left" width="135"><input type="text" name="img" value="'+jQuery(this).parent().parent().find("td:eq(5)").text()+'" /></td>';
		HTML+='</tr>'; 		
		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Visible:</td>';                    
        HTML+=' <td align="left" width="135"><select name="visible"><option value="S">S</option><option value="N">N</option></select></td>';
		HTML+='</tr>';
         HTML+='</table><input class="clearfix submit_frm left" style="margin-right:5px;" frmid="frmtplregistro" type="button" value="Actualizar"  rel="Actualizar|productos"/><input class="clearfix submit_frm left" style="margin-right:5px;" frmid="frmtplregistro" type="button" value="Cancelar"  onclick="jQuery.colorbox.close()"/> </div>';		
		
	
		jQuery.colorbox({html:HTML,width:"924px" });
	
		jQuery("[rel^='Actualizar']").click(function(){
			var TIPO=jQuery(this).attr("rel").split("|");
			jQuery.ajax({
				type: "POST",
				url: "ajax.php",
				data: { tipo:TIPO[1],opcion:TIPO[0], id: item[1],titulo:jQuery("#editar [name='titulo']").val(),visible:jQuery("#editar [name='visible']").val(),texto:jQuery("#editar [name='texto']").val(),idCategoria:jQuery("#editar [name='idCategoria']").val(),descripcion:jQuery("#editar [name='descripcion']").val(),img:jQuery("#editar [name='img']").val()}
			}).done(function( datos ) {
				 if(datos=="ok"){
					OBJ.parent().parent().find("td:eq(2)").text(jQuery("#editar [name='titulo']").val());
					OBJ.parent().parent().find("td:eq(6)").text(jQuery("#editar [name='visible']").val());
					OBJ.parent().parent().find("td:eq(4)").text(jQuery("#editar [name='texto']").val());
					OBJ.parent().parent().find("td:eq(3)").text(jQuery("#editar [name='descripcion']").val());
					OBJ.parent().parent().find("td:eq(1)").text(jQuery("#editar [name='idCategoria']").val());
					OBJ.parent().parent().find("td:eq(5)").text(jQuery("#editar [name='img']").val());
					jQuery.colorbox({html:"El producto ha sido actualizado"});
				}
			});
		});


});
jQuery("[rel^='agregar']").click(function(){

	var item=jQuery(this).attr("rel").split("|");
	var OBJ=jQuery(this)
	var HTML='<div id="agregar" >';
        HTML+='<table class="tg" align="center" width="900">';
        HTML+='<table  class="tg" align="center" width="100%">';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Categorias</td>';                    
        HTML+=' <td align="left" width="135"><select name="idCategoria"><option value="0">Ninguno</option>{# foreach from=$obj->categorias item=categoria key=id #}<option value="{#$categoria->id#}">{#$categoria->categoria#}</option>{#/foreach#}</select></td>';
		HTML+='</tr>';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250"class="tg-031e">Titulo</td>';                    
        HTML+=' <td align="left" width="135"><input type="text" name="titulo" /></td>';
		HTML+='</tr>';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Descripcion:</td>';                    
        HTML+=' <td align="left" width="135"><textarea rows="10" cols="50" name="descripcion"> </textarea></td>';
		HTML+='</tr>'; 		
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Descripcion Larga:</td>';                    
        HTML+=' <td align="left" width="135"><textarea rows="10" cols="50" name="texto"> </textarea></td>';
		HTML+='</tr>'; 		
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Imagen:</td>';                    
        HTML+=' <td align="left" width="135"><input type="text" name="img"   /></td>';
		HTML+='</tr>'; 		
		HTML+='<tr>';
        HTML+=' <td align="left" width="250" class="tg-031e">Visible:</td>';                    
        HTML+=' <td align="left" width="135"><select name="visible"><option value="S">S</option><option value="N">N</option></select></td>';
		HTML+='</tr>'; 		 
        HTML+='</table><div style="cursor:pointer" rel="Agregar|productos">Agregar</div><br>   <div style="cursor:pointer" onclick="jQuery.colorbox.close()">Cancelar</div></div>';		
		
	
		jQuery.colorbox({html:HTML,width:"924px" });
	
		jQuery("[rel^='Agregar']").click(function(){
			var TIPO=jQuery(this).attr("rel").split("|");
			jQuery.ajax({
				type: "POST",
				url: "ajax.php",
				data: { tipo:TIPO[1],opcion:TIPO[0], id: item[1],titulo:jQuery("#agregar [name='titulo']").val(),visible:jQuery("#agregar [name='visible']").val(),texto:jQuery("#agregar [name='texto']").val(),idCategoria:jQuery("#agregar [name='idCategoria']").val(),descripcion:jQuery("#agregar [name='descripcion']").val(),img:jQuery("#agregar [name='img']").val()}
			}).done(function( datos ) {
				 if(datos=="ok"){
 					jQuery.colorbox({html:"El producto ha sido agregado"});
					setTimeout(function(){document.location="index.php?seccion=productos"},1800);
				}
			});
		});


});
jQuery("[rel^='eliminar']").click(function(){

	var item=jQuery(this).attr("rel").split("|");
	var OBJ=jQuery(this)
	var HTML='<div id="editar" width="600" >';
        HTML+='<table border="0" cellpadding="1" cellspacing="0" align="center" width="100%">';
 		HTML+='<tr>';
        HTML+=' <td align="left" width="250" style="background: #999;color:#fff">Seguro decea eliminar este producto?</td>';                    
 		HTML+='</tr>';
  		 
        HTML+='</table><div style="cursor:pointer" rel="Elimina|productos">Aceptar</div><br>   <div style="cursor:pointer" onclick="jQuery.colorbox.close()">Cancelar</div></div>';		
		
	
		jQuery.colorbox({html:HTML});
	
		jQuery("[rel^='Elimina']").click(function(){
			var TIPO=jQuery(this).attr("rel").split("|");
			jQuery.ajax({
				type: "POST",
				url: "ajax.php",
				data: { tipo:TIPO[1],opcion:TIPO[0], id: item[1]}
			}).done(function( datos ) {
				 if(datos=="ok"){
					OBJ.parent().parent().remove();
 					jQuery.colorbox({html:"El producto ha sido Eliminado"});
				}
			});
		});


});
</script>